<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Countdown â€” Letter Reveal</title>

  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --card-border: rgba(255,255,255,0.12);
      --muted: rgba(255,255,255,0.82);
    }

    /* ensure html/body cover full viewport */
    html,body{
      height:100%;
      margin:0;
    }

    body{
      font-family: "Playfair Display", serif;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      color: #fffefc;
      position:relative;
      overflow-x:hidden;
      background-color:#0b0b0b; /* fallback */
    }

    /* reliable full-screen background layer */
    body::before{
      content: "";
      position: fixed;
      inset: 0;
      background-image: url('bbg.jpeg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      z-index: -2;
      transform: translateZ(0); /* force composite */
    }

    /* optional subtle dark overlay to increase contrast */
    body::after{
      content: "";
      position: fixed;
      inset: 0;
      background: linear-gradient(180deg, rgba(0,0,0,0.25), rgba(0,0,0,0.45));
      z-index: -1;
    }

    /* Frosted glass tile */
    .card{
      width:min(820px, 94vw);
      padding:44px 36px;
      border-radius:16px;
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      border:1px solid var(--card-border);
      backdrop-filter: blur(14px) saturate(120%);
      box-shadow: 0 20px 60px rgba(6,8,15,0.6);
      text-align:center;
    }

    .countdown{
      font-family: "Great Vibes", cursive;
      font-size: clamp(48px, 12vw, 110px);
      line-height:0.95;
      margin:0 0 10px 0;
      text-shadow: 0 10px 30px rgba(0,0,0,0.55);
    }

    .sub{
      color: var(--muted);
      font-size:1.05rem;
      margin-bottom:26px;
    }

    /* button, hidden until countdown ends */
    .open-btn{
      display:inline-block;
      padding:10px 26px;
      font-family: "Great Vibes", cursive;
      font-size:1.6rem;
      border-radius:12px;
      border:1px solid rgba(255,255,255,0.9);
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
      color: #fffefc;
      cursor:pointer;
      transform: translateY(10px);
      opacity:0;
      pointer-events:none;
      transition: transform 420ms cubic-bezier(.2,.9,.2,1), opacity 420ms ease;
      box-shadow: 0 10px 30px rgba(0,0,0,0.45);
    }
    .open-btn.visible{
      opacity:1;
      transform: translateY(0);
      pointer-events:auto;
    }
    .open-btn:active{ transform: translateY(1px); }
    .open-btn:focus{ outline: 3px solid rgba(255,255,255,0.12); outline-offset:4px; }

    /* modal overlay and letter box */
    .overlay{
      position:fixed;
      inset:0;
      background: rgba(6,8,12,0.6);
      display:flex;
      align-items:center;
      justify-content:center;
      opacity:0;
      pointer-events:none;
      transition: opacity 240ms ease;
      z-index:60;
    }
    .overlay.show{
      opacity:1;
      pointer-events:auto;
    }

    .letter {
      width:min(760px, 92vw);
      max-height:86vh;
      overflow:auto;
      border-radius:12px;
      padding:34px 36px;
      background: linear-gradient(180deg, #fffefc 0%, #fffaf6 100%);
      color:#0b0b0b;
      box-shadow: 0 30px 90px rgba(2,6,20,0.75);
      transform: translateY(8px) scale(.98);
      opacity:0;
      transition: transform 320ms cubic-bezier(.2,.9,.2,1), opacity 320ms ease;
      position:relative;
      border: 1px solid rgba(0,0,0,0.06);
      font-family: "Playfair Display", serif;
      line-height:1.7;
    }
    .overlay.show .letter{
      transform: translateY(0) scale(1);
      opacity:1;
    }

    /* letter header look */
    .letter::before{
      content: "";
      position:absolute;
      left:20px;
      right:20px;
      height:1px;
      top:16px;
      background: linear-gradient(90deg, rgba(0,0,0,0.08), rgba(0,0,0,0.02));
      opacity:0.6;
    }

    /* Message text: single block that wraps naturally */
    .letter .greeting {
      font-family: "Great Vibes", cursive;
      font-size: 2.0rem;
      margin:8px 0 14px 0;
      color: #111;
      text-align:center;
    }

    .letter .body {
      padding: 0 26px;
      font-size:1.06rem;
      color:#111;
      text-align:center;           /* centered; will wrap naturally */
      white-space: normal;        /* allow normal wrapping */
      word-wrap: break-word;
      margin-bottom: 6px;
    }

    /* close button */
    .close-btn{
      position:absolute;
      top:12px;
      right:12px;
      background: rgba(0,0,0,0.46);
      color:white;
      border:none;
      padding:6px 10px;
      border-radius:8px;
      cursor:pointer;
      z-index:90;
      backdrop-filter: blur(6px);
    }

    @media (max-width:520px){
      .card{ padding:28px 18px; border-radius:12px; }
      .countdown{ font-size: clamp(40px, 18vw, 72px); }
      .letter{ padding:20px; }
      .letter .greeting { font-size:1.6rem; }
    }
  </style>
</head>
<body>
  <div class="card" role="main" aria-labelledby="countLabel">
    <div id="countLabel" class="countdown" aria-live="polite">--:--:--</div>
    <div class="sub">Countdown reveals a message</div>
    <button id="openBtn" class="open-btn" aria-hidden="true" aria-disabled="true">Open Message</button>
  </div>

  <!-- popup letter -->
  <div id="overlay" class="overlay" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="letter" role="document" aria-labelledby="greeting">
      <button class="close-btn" id="closeBtn" aria-label="Close message">âœ•</button>

      <div class="greeting" id="greeting">A Little Letter</div>

      <div class="body" id="messageBody">
        ğ™ƒğ™–ğ™¥ğ™¥ğ™® ğ™—ğ™ğ™§ğ™©ğ™ğ™™ğ™–ğ™® ğ™©ğ™¤ ğ™©ğ™ğ™š ğ™œğ™ğ™§ğ™¡ ğŸ’Œ who shines like the sunğŸŒ», looks like the moonğŸŒ“, smells like a flowerğŸŒ¹, and whose eyes are like diamonds ğŸ’ that brighten my world.âœ¨
      </div>
    </div>
  </div>

  <script>
    (function(){
      const target = new Date(2025, 10, 4, 0, 0, 0); // 4 Nov 2025, local
      const countdownEl = document.getElementById('countLabel');
      const openBtn = document.getElementById('openBtn');
      const overlay = document.getElementById('overlay');
      const closeBtn = document.getElementById('closeBtn');

      function pad(n){ return String(n).padStart(2,'0'); }

      function update(){
        const now = new Date();
        let diff = target - now;

        if (diff <= 0) {
          countdownEl.textContent = "It's time";
          revealButton();
          clearInterval(tick);
          return;
        }

        const sec = Math.floor(diff/1000);
        const days = Math.floor(sec / (3600*24));
        const hours = Math.floor((sec % (3600*24)) / 3600);
        const minutes = Math.floor((sec % 3600) / 60);
        const seconds = sec % 60;

        const dayPart = days > 0 ? `${days}d ` : '';
        countdownEl.textContent = `${dayPart}${hours}h ${pad(minutes)}m ${pad(seconds)}s`;
      }

      function revealButton(){
        openBtn.classList.add('visible');
        openBtn.removeAttribute('aria-hidden');
        openBtn.removeAttribute('aria-disabled');
        openBtn.tabIndex = 0;
      }

      openBtn.addEventListener('click', function(){
        overlay.classList.add('show');
        overlay.setAttribute('aria-hidden','false');
        closeBtn.focus();
      });

      function closePopup(){
        overlay.classList.remove('show');
        overlay.setAttribute('aria-hidden','true');
        openBtn.focus();
      }

      closeBtn.addEventListener('click', closePopup);

      overlay.addEventListener('click', function(e){
        if (e.target === overlay) closePopup();
      });

      document.addEventListener('keydown', function(e){
        if (e.key === 'Escape' && overlay.classList.contains('show')) {
          closePopup();
        }
      });

      // initial
      update();
      const tick = setInterval(update, 1000);
      if (new Date() >= target) revealButton();
    })();
  </script>
</body>
</html>
